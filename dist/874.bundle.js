(self.webpackChunksteltrek_project=self.webpackChunksteltrek_project||[]).push([[874],{874:e=>{function t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(t=function(){return!!e})()}function n(){return n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},n.apply(null,arguments)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,m(s.key),s)}}function d(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){var t=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}var h=function(){return d((function e(){var t,n,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,e),this.options=a({moduleType:(null===(t=document.querySelector("[data-module]"))||void 0===t?void 0:t.dataset.module)||"default",useMockData:!0,updateInterval:3e3},s),this.session={active:!1,startTime:null,currentExercise:null,currentZone:null,sessionProgress:0,completed:[]},this.metrics={heartRate:72,o2Saturation:98,focusScore:90,balance:0,coreStability:0,endurance:0,formQuality:0,timeInZone:{},recoveryRate:0},this.userProfile={credits:parseInt((null===(n=document.getElementById("credits-earned"))||void 0===n?void 0:n.textContent)||"0"),streak:0,certifications:{}},this.stellaCore=window.stellaCore,this.initialize()}),[{key:"initialize",value:function(){console.log("Initializing ".concat(this.options.moduleType," training module")),this.initializeUI(),this.setupEventListeners(),this.initializeSTELLA(),this.initializeModuleSpecific()}},{key:"initializeUI",value:function(){this.timerElement=document.getElementById("session-timer"),this.progressElement=document.getElementById("progress-percentage"),this.creditsElement=document.getElementById("credits-earned"),this.focusScoreElement=document.getElementById("focus-score"),this.heartRateElement=document.getElementById("current-hr"),this.o2Element=document.getElementById("current-o2"),this.stellaGuidanceElement=document.getElementById("stella-guidance"),this.stellaFeedbackElement=document.getElementById("stella-".concat(this.options.moduleType,"-feedback")),this.updateTimerDisplay(0)}},{key:"setupEventListeners",value:function(){var e=this,t=document.getElementById("pause-session");t&&t.addEventListener("click",(function(){return e.togglePause()}));var n=document.getElementById("ai-help-button");n&&n.addEventListener("click",(function(){e.stellaCore&&e.stellaCore.showModal()}));var s=document.getElementById("close-stella-modal");s&&s.addEventListener("click",(function(){var e=document.getElementById("stella-help-modal");e&&e.classList.add("hidden")}));var i=document.getElementById("send-to-stella"),r=document.getElementById("stella-question");i&&r&&(i.addEventListener("click",(function(){var t=r.value.trim();t&&e.stellaCore&&(e.stellaCore.askQuestion(t),r.value="")})),r.addEventListener("keydown",(function(t){if("Enter"===t.key&&e.stellaCore){var n=r.value.trim();n&&(e.stellaCore.askQuestion(n),r.value="")}})))}},{key:"initializeSTELLA",value:function(){var e=this;this.stellaCore?(this.stellaCore.getGuidance(this.options.moduleType),document.addEventListener("stella-guidance",(function(t){e.updateSTELLAGuidance(t.detail.guidance)})),document.addEventListener("stella-metrics-update",(function(t){e.updateMetrics(t.detail.metrics)}))):console.warn("STELLA Core not available. Some features may be limited.")}},{key:"updateSTELLAGuidance",value:function(e){if(this.stellaGuidanceElement&&e&&e.message){var t=e.actionItems&&e.actionItems.length?'<ul class="mt-2 space-y-1">\n              '.concat(e.actionItems.map((function(e){return'<li class="text-xs text-blue-200">â€¢ '.concat(e,"</li>")})).join(""),"\n            </ul>"):"";this.stellaGuidanceElement.innerHTML='\n          <div class="bg-blue-500/10 rounded-lg p-3">\n            <p class="text-sm text-blue-300">'.concat(e.message,"</p>\n            ").concat(t,"\n          </div>\n        ")}}},{key:"initializeModuleSpecific",value:function(){console.log("Base module initialization complete")}},{key:"startSession",value:function(){this.session.active=!0,this.session.startTime=new Date,this.session.sessionProgress=0,this.startTimer(),this.updateSessionUI(!0),this.stellaCore&&(this.stellaCore.updateMetrics({sessionActive:!0}),this.stellaCore.getGuidance(this.options.moduleType,{sessionStart:!0})),this.options.useMockData&&this.startMockDataUpdates(),console.log("".concat(this.options.moduleType," training session started"))}},{key:"endSession",value:function(){this.session.active=!1,this.stopTimer();var e=Math.floor((new Date-this.session.startTime)/1e3);return this.updateSessionUI(!1),this.stellaCore&&(this.stellaCore.updateMetrics({sessionActive:!1,sessionDuration:e,completedExercises:this.session.completed}),this.stellaCore.getGuidance(this.options.moduleType,{sessionEnd:!0})),clearInterval(this.metricsInterval),this.updateProgress(),console.log("".concat(this.options.moduleType," training session ended")),{duration:e,completed:this.session.completed,metrics:this.metrics}}},{key:"togglePause",value:function(){var e=document.getElementById("pause-session");this.session.active&&(this.session.paused?(this.session.paused=!1,this.startTimer(),e&&(e.textContent="Pause"),this.stellaCore&&this.stellaCore.updateMetrics({sessionPaused:!1})):(this.session.paused=!0,this.stopTimer(),e&&(e.textContent="Resume"),this.stellaCore&&this.stellaCore.updateMetrics({sessionPaused:!0})))}},{key:"updateSessionUI",value:function(e){var t=document.getElementById("start-session"),n=document.getElementById("end-session"),s=document.getElementById("pause-session"),i=document.getElementById("session-controls"),r=document.getElementById("pre-session-ui"),o=document.getElementById("active-session-ui");e?(r&&r.classList.add("hidden"),o&&o.classList.remove("hidden"),i&&i.classList.remove("hidden"),t&&t.classList.add("hidden"),n&&n.classList.remove("hidden"),s&&(s.classList.remove("hidden"),s.textContent="Pause")):(r&&r.classList.remove("hidden"),o&&o.classList.add("hidden"),i&&i.classList.add("hidden"),t&&t.classList.remove("hidden"),n&&n.classList.add("hidden"),s&&s.classList.add("hidden"))}},{key:"startTimer",value:function(){var e=this;this.stopTimer();var t=this.session.startTime;this.timerInterval=setInterval((function(){if(e.session.active&&!e.session.paused){var n=Math.floor((new Date-t)/1e3);e.updateTimerDisplay(n)}}),1e3)}},{key:"stopTimer",value:function(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null)}},{key:"updateTimerDisplay",value:function(e){if(this.timerElement){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),s=e%60,i=[t.toString().padStart(2,"0"),n.toString().padStart(2,"0"),s.toString().padStart(2,"0")].join(":");this.timerElement.textContent=i}}},{key:"updateProgress",value:function(e){if(this.progressElement){var t="number"==typeof e?e:this.session.sessionProgress;this.session.sessionProgress=t,this.progressElement.textContent="".concat(Math.floor(t),"%");var n=document.querySelector(".progress-fill");n&&(n.style.width="".concat(t,"%")),this.stellaCore&&this.stellaCore.updateMetrics({sessionProgress:t})}}},{key:"updateMetrics",value:function(e){this.metrics=a(a({},this.metrics),e),this.heartRateElement&&void 0!==e.heartRate&&(this.heartRateElement.textContent=e.heartRate),this.o2Element&&void 0!==e.o2Saturation&&(this.o2Element.textContent=e.o2Saturation),this.focusScoreElement&&void 0!==e.focusScore&&(this.focusScoreElement.textContent=e.focusScore),this.updateModuleSpecificMetrics(e)}},{key:"updateModuleSpecificMetrics",value:function(e){}},{key:"startMockDataUpdates",value:function(){var e=this;this.metricsInterval&&clearInterval(this.metricsInterval),this.metricsInterval=setInterval((function(){if(e.session.active&&!e.session.paused){var t=e.generateMockMetrics();e.updateMetrics(t);var n=Math.min(100,e.session.sessionProgress+100/900*(e.options.updateInterval/1e3));e.updateProgress(n),Math.random()<.1&&e.stellaCore&&e.stellaCore.getGuidance(e.options.moduleType)}}),this.options.updateInterval)}},{key:"generateMockMetrics",value:function(){var e=Math.floor(10*Math.random())-5,t=Math.random()<.8?0:Math.floor(3*Math.random())-1,n=Math.floor(6*Math.random())-3;return{heartRate:Math.max(60,Math.min(180,this.metrics.heartRate+e)),o2Saturation:Math.max(94,Math.min(100,this.metrics.o2Saturation+t)),focusScore:Math.max(60,Math.min(100,this.metrics.focusScore+n))}}},{key:"completeExercise",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a({id:e,timestamp:(new Date).toISOString()},t);this.session.completed.push(n),this.awardCredits(t.credits||10),this.stellaCore&&(this.stellaCore.updateMetrics({completedExercise:n}),this.stellaCore.getGuidance(this.options.moduleType,{exerciseCompleted:e}));var s=100/(this.getModuleExerciseCount()||10);return this.updateProgress(this.session.sessionProgress+s),console.log("Exercise ".concat(e," completed")),n}},{key:"getModuleExerciseCount",value:function(){return 10}},{key:"awardCredits",value:function(e){this.userProfile.credits+=e,this.creditsElement&&(this.creditsElement.textContent=this.userProfile.credits),this.showNotification("Earned ".concat(e," credits!")),this.saveUserProgress()}},{key:"showNotification",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=document.createElement("div");n.className="fixed bottom-4 right-4 px-4 py-2 rounded-lg z-50 transform transition-transform duration-300 translate-y-20 ".concat("success"===t?"bg-green-900/80 text-green-100 border border-green-500/30":"warning"===t?"bg-yellow-900/80 text-yellow-100 border border-yellow-500/30":"bg-red-900/80 text-red-100 border border-red-500/30"),n.textContent=e,document.body.appendChild(n),setTimeout((function(){n.classList.remove("translate-y-20")}),10),setTimeout((function(){n.classList.add("translate-y-20"),setTimeout((function(){n.remove()}),300)}),3e3)}},{key:"saveUserProgress",value:function(){if(window.api&&window.api.saveUserProgress)window.api.saveUserProgress({moduleType:this.options.moduleType,credits:this.userProfile.credits,completedExercises:this.session.completed}).then((function(){return console.log("Progress saved")})).catch((function(e){return console.error("Error saving progress:",e)}));else{console.log("Simulating progress save:",{moduleType:this.options.moduleType,credits:this.userProfile.credits,completedExercises:this.session.completed});try{localStorage.setItem("sharedStars_userProgress",JSON.stringify({moduleType:this.options.moduleType,credits:this.userProfile.credits,completedExercises:this.session.completed,lastUpdated:(new Date).toISOString()}))}catch(e){console.warn("Could not save to localStorage",e)}}}},{key:"loadUserProgress",value:function(){var e=this;if(window.api&&window.api.getUserProgress)window.api.getUserProgress(this.options.moduleType).then((function(t){t&&(e.userProfile.credits=t.credits||e.userProfile.credits,e.updateUserProfile(t))})).catch((function(e){return console.error("Error loading progress:",e)}));else try{var t=localStorage.getItem("sharedStars_userProgress");if(t){var n=JSON.parse(t);this.updateUserProfile(n)}}catch(e){console.warn("Could not load from localStorage",e)}}},{key:"updateUserProfile",value:function(e){e.credits&&this.creditsElement&&(this.userProfile.credits=e.credits,this.creditsElement.textContent=e.credits),e.streak&&(this.userProfile.streak=e.streak),e.certifications&&(this.userProfile.certifications=e.certifications)}},{key:"setCurrentExercise",value:function(e){this.session.currentExercise=e,document.querySelectorAll(".exercise-item").forEach((function(t){t.dataset.exerciseId===e?t.classList.add("current-exercise","border-blue-500","bg-blue-900/20"):t.classList.remove("current-exercise","border-blue-500","bg-blue-900/20")})),this.stellaCore&&(this.stellaCore.updateMetrics({currentExercise:e}),this.stellaCore.getGuidance(this.options.moduleType,{currentExercise:e}))}},{key:"setCurrentZone",value:function(e){this.session.currentZone=e;var t=document.getElementById("current-zone");t&&(t.textContent=e.charAt(0).toUpperCase()+e.slice(1),t.className="font-medium "+("aerobic"===e?"text-green-400":"strength"===e?"text-red-400":"balance"===e?"text-blue-400":"flexibility"===e?"text-purple-400":"text-white")),this.stellaCore&&this.stellaCore.updateMetrics({currentZone:e})}}])}(),p=function(e){function o(){return l(this,o),e=this,i=arguments,n=s(n=o),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,t()?Reflect.construct(n,i||[],s(e).constructor):n.apply(e,i));var e,n,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(o,e),d(o,[{key:"initializeModuleSpecific",value:function(){var e=this;console.log("Initializing physical training module"),document.querySelectorAll("[data-exercise]").forEach((function(t){t.addEventListener("click",(function(){var n=t.dataset.exercise;e.setCurrentExercise(n)}))})),this.loadExercises()}},{key:"updateModuleSpecificMetrics",value:function(e){var t=document.getElementById("balance-score");t&&void 0!==e.balance&&(t.textContent=e.balance);var n=document.getElementById("core-stability");n&&void 0!==e.coreStability&&(n.textContent=e.coreStability)}},{key:"generateMockMetrics",value:function(){var e,t,i;return a(a({},(e=o,t=this,"function"==typeof(i=n(s(1&3?e.prototype:e),"generateMockMetrics",t))?function(e){return i.apply(t,e)}:i)([])),{},{balance:Math.max(0,Math.min(100,this.metrics.balance+(Math.floor(5*Math.random())-2))),coreStability:Math.max(0,Math.min(100,this.metrics.coreStability+(Math.floor(5*Math.random())-2))),endurance:Math.max(0,Math.min(100,this.metrics.endurance+(Math.floor(3*Math.random())-1)))})}},{key:"loadExercises",value:function(){var e=this,t=document.getElementById("exercise-list");t&&(t.innerHTML="",[{id:"zero-g-squat",name:"Zero-G Squat",zone:"strength",duration:180},{id:"vestibular-balance",name:"Vestibular Balance",zone:"balance",duration:120},{id:"core-rotation",name:"Core Rotation",zone:"strength",duration:150},{id:"spatial-orientation",name:"Spatial Orientation",zone:"balance",duration:240},{id:"endurance-cycle",name:"Endurance Cycle",zone:"aerobic",duration:300}].forEach((function(n){var s=document.createElement("div");s.className="exercise-item p-3 border border-gray-700 rounded-lg mb-2 cursor-pointer hover:bg-gray-800/50 transition",s.dataset.exerciseId=n.id;var i="aerobic"===n.zone?"bg-green-500/20 text-green-400":"strength"===n.zone?"bg-red-500/20 text-red-400":"balance"===n.zone?"bg-blue-500/20 text-blue-400":"bg-purple-500/20 text-purple-400";s.innerHTML='\n          <div class="flex items-center justify-between">\n            <div>\n              <h4 class="font-medium">'.concat(n.name,'</h4>\n              <div class="flex items-center mt-1">\n                <span class="text-xs px-2 py-0.5 rounded ').concat(i,' mr-2">').concat(n.zone,'</span>\n                <span class="text-xs text-gray-400">').concat(Math.floor(n.duration/60),":").concat((n.duration%60).toString().padStart(2,"0"),'</span>\n              </div>\n            </div>\n            <button class="start-exercise px-2 py-1 text-xs bg-blue-600 hover:bg-blue-500 rounded text-white" data-exercise="').concat(n.id,'">\n              Start\n            </button>\n          </div>\n        '),t.appendChild(s),s.querySelector(".start-exercise").addEventListener("click",(function(t){t.stopPropagation(),e.startExercise(n)})),s.addEventListener("click",(function(){e.showExerciseDetails(n)}))})))}},{key:"startExercise",value:function(e){var t=this;this.session.active||this.startSession(),this.setCurrentExercise(e.id),this.setCurrentZone(e.zone);var n=document.getElementById("active-exercise");n&&(n.classList.remove("hidden"),n.querySelector(".exercise-name").textContent=e.name,n.querySelector(".exercise-duration").textContent="".concat(Math.floor(e.duration/60),":").concat((e.duration%60).toString().padStart(2,"0"))),this.stellaCore&&this.stellaCore.getGuidance(this.options.moduleType,{currentExercise:e.id,exerciseStarted:!0}),this.exerciseTimer=setInterval((function(){if(!t.session.paused){remainingTime--,timerElement&&(timerElement.textContent="".concat(Math.floor(remainingTime/60),":").concat((remainingTime%60).toString().padStart(2,"0")));var s=document.getElementById("exercise-progress");if(s){var i=100-remainingTime/e.duration*100;s.style.width="".concat(i,"%")}if(remainingTime<=0){clearInterval(t.exerciseTimer),t.completeExercise(e.id,{duration:e.duration,zone:e.zone}),n&&n.classList.add("hidden");var r=document.getElementById("exercise-completion");r&&(r.classList.remove("hidden"),setTimeout((function(){r.classList.add("hidden")}),3e3))}}}),1e3)}},{key:"showExerciseDetails",value:function(e){var t=document.getElementById("exercise-details-modal");if(t){t.classList.remove("hidden");var n=t.querySelector(".modal-title"),s=t.querySelector(".modal-content");n&&(n.textContent=e.name),s&&(s.innerHTML='\n          <div class="space-y-4">\n            <div>\n              <span class="text-sm text-gray-400">Type:</span>\n              <span class="text-white font-medium">'.concat(e.zone.charAt(0).toUpperCase()+e.zone.slice(1),'</span>\n            </div>\n            <div>\n              <span class="text-sm text-gray-400">Duration:</span>\n              <span class="text-white font-medium">').concat(Math.floor(e.duration/60),":").concat((e.duration%60).toString().padStart(2,"0"),'</span>\n            </div>\n            <div>\n              <h4 class="text-sm text-gray-400 mb-1">Description:</h4>\n              <p class="text-white">This ').concat(e.zone," exercise is designed to train astronauts for the unique challenges of ").concat("aerobic"===e.zone?"maintaining cardiovascular fitness":"strength"===e.zone?"preserving muscle mass":"maintaining spatial orientation",' in microgravity environments.</p>\n            </div>\n            <div>\n              <h4 class="text-sm text-gray-400 mb-1">STELLA\'s Tips:</h4>\n              <div class="bg-blue-900/20 border border-blue-500/20 rounded-lg p-3">\n                <p class="text-blue-300 text-sm">For best results, ').concat("aerobic"===e.zone?"maintain a steady pace and focus on controlled breathing patterns.":"strength"===e.zone?"ensure proper form and engage core muscles throughout the exercise.":"close your eyes periodically to challenge your vestibular system more intensely.","</p>\n              </div>\n            </div>\n          </div>\n        "));var i=t.querySelector(".close-modal");i&&i.addEventListener("click",(function(){t.classList.add("hidden")})),t.addEventListener("click",(function(e){e.target===t&&t.classList.add("hidden")}))}}},{key:"getModuleExerciseCount",value:function(){return 5}}])}(h);e.exports?e.exports={TrainingModule:h,PhysicalTrainingModule:p}:(window.TrainingModule=h,window.PhysicalTrainingModule=p),document.addEventListener("DOMContentLoaded",(function(){var e,t,n=null===(e=document.querySelector("[data-module]"))||void 0===e?void 0:e.dataset.module;n&&(t="physical"===n?new p:new h({moduleType:n}),window.trainingModule=t)}))}}]);